# Create an AWS key pair using the generated public key
resource "aws_key_pair" "lms_keypair" {
  key_name   = "lms-key"
  public_key = local_file.lms_key_public.content
}

# EC2 Server Setup - Web App Hosting
resource "aws_instance" "lms-server" {
  ami           = "ami-0430580de6244e02e"
  instance_type = "t2.medium"
  subnet_id = aws_subnet.lms-subnet.id
  key_name = "lms-key"
  vpc_security_group_ids = [aws_security_group.lms-sg.id]
  tags = {
    Name = "lms-server"
  }
}
